{"version":3,"sources":["file:///Users/fldsmdfr/Documents/GitHub/Blue_Games/Venados/Test/NewProject/assets/scripts/PlayerAnimationCtrl.ts"],"names":["_decorator","Component","Input","Animation","director","ccclass","property","PlayerAnimationCtrl","animation","canTouch","onLoad","getComponent","onEnable","node","on","EventType","TOUCH_START","onTouchStart","FINISHED","onAnimationFinished","onDisable","off","event","play","emit","clips","length","clipName","name","state","getState","time","sample"],"mappings":";;;;;;;;;;AAASA,MAAAA,U,OAAAA,U;AAAYC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,K,OAAAA,K;AAAmBC,MAAAA,S,OAAAA,S;AAAWC,MAAAA,Q,OAAAA,Q;;;;;;;;;OACxD;AAAEC,QAAAA,OAAF;AAAWC,QAAAA;AAAX,O,GAAwBN,U;;qCAGjBO,mB,WADZF,OAAO,CAAC,qBAAD,C,gBAAR,MACaE,mBADb,SACyCN,SADzC,CACmD;AAAA;AAAA;AAAA,eACvCO,SADuC,GAChB,IADgB;AAAA,eAEvCC,QAFuC,GAEnB,IAFmB;AAAA;;AAI/CC,QAAAA,MAAM,GAAG;AACL,eAAKF,SAAL,GAAiB,KAAKG,YAAL,CAAkBR,SAAlB,CAAjB;AACH;;AAEDS,QAAAA,QAAQ,GAAG;AACP,eAAKC,IAAL,CAAUC,EAAV,CAAaZ,KAAK,CAACa,SAAN,CAAgBC,WAA7B,EAA0C,KAAKC,YAA/C,EAA6D,IAA7D;AACA,eAAKT,SAAL,CAAeM,EAAf,CAAkBX,SAAS,CAACY,SAAV,CAAoBG,QAAtC,EAAgD,KAAKC,mBAArD,EAA0E,IAA1E;AACH;;AAEDC,QAAAA,SAAS,GAAG;AACR,eAAKP,IAAL,CAAUQ,GAAV,CAAcnB,KAAK,CAACa,SAAN,CAAgBC,WAA9B,EAA2C,KAAKC,YAAhD,EAA8D,IAA9D;AACA,eAAKT,SAAL,CAAea,GAAf,CAAmBlB,SAAS,CAACY,SAAV,CAAoBG,QAAvC,EAAiD,KAAKC,mBAAtD,EAA2E,IAA3E;AACH;;AAEOF,QAAAA,YAAY,CAACK,KAAD,EAAoB;AACpC,cAAI,KAAKb,QAAT,EAAmB;AACf,iBAAKD,SAAL,CAAee,IAAf;AACAnB,YAAAA,QAAQ,CAACoB,IAAT,CAAc,gBAAd,EAAgC,CAAhC;AACH;AACJ;;AAEOL,QAAAA,mBAAmB,GAAG;AAC1B;AACA,cAAMM,KAAK,GAAG,KAAKjB,SAAL,CAAeiB,KAA7B;;AACA,cAAIA,KAAK,IAAIA,KAAK,CAACC,MAAN,GAAe,CAA5B,EAA+B;AAC3B,gBAAMC,QAAQ,GAAGF,KAAK,CAAC,CAAD,CAAL,CAASG,IAA1B;AACA,gBAAMC,KAAK,GAAG,KAAKrB,SAAL,CAAesB,QAAf,CAAwBH,QAAxB,CAAd;;AACA,gBAAIE,KAAJ,EAAW;AACPA,cAAAA,KAAK,CAACE,IAAN,GAAa,CAAb;AACAF,cAAAA,KAAK,CAACG,MAAN;AACH;AACJ;AAEJ;;AArC8C,O","sourcesContent":["import { _decorator, Component, Input, EventTouch, Animation, director } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('PlayerAnimationCtrl')\nexport class PlayerAnimationCtrl extends Component {\n    private animation: Animation = null!;\n    private canTouch: boolean = true;\n\n    onLoad() {\n        this.animation = this.getComponent(Animation)!;\n    }\n\n    onEnable() {\n        this.node.on(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        this.animation.on(Animation.EventType.FINISHED, this.onAnimationFinished, this);\n    }\n\n    onDisable() {\n        this.node.off(Input.EventType.TOUCH_START, this.onTouchStart, this);\n        this.animation.off(Animation.EventType.FINISHED, this.onAnimationFinished, this);\n    }\n\n    private onTouchStart(event: EventTouch) {\n        if (this.canTouch) {\n            this.animation.play();\n            director.emit('subtract-bateo', 1);\n        }\n    }\n\n    private onAnimationFinished() {\n        // Get the animation state and reset to first frame\n        const clips = this.animation.clips;\n        if (clips && clips.length > 0) {\n            const clipName = clips[0].name;\n            const state = this.animation.getState(clipName);\n            if (state) {\n                state.time = 0;\n                state.sample();\n            }\n        }\n        \n    }\n}"]}