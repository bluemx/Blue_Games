{"version":3,"sources":["file:///Users/fldsmdfr/Documents/GitHub/Blue_Games/Venados/Test/NewProject/assets/scripts/BallSpawner.ts"],"names":["_decorator","Component","Node","Prefab","instantiate","Vec3","UITransform","math","RigidBody2D","Vec2","Sprite","Color","ccclass","property","BallSpawner","tooltip","spawnTimer","gameTime","currentSpawnInterval","start","initialSpawnInterval","update","deltaTime","updateSpawnSpeed","spawnBall","speedReduction","speedIncreaseRate","Math","max","minSpawnInterval","ballPrefab","console","error","ball","canvasTransform","canvas","getComponent","worldSize","contentSize","width","height","isGoldenBall","random","goldenBallChance","sprite","color","name","log","padding","randomX","lerp","spawnY","spawnHeight","setPosition","addChild","rigidBody","randomForce","minDownwardForce","maxDownwardForce","linearVelocity"],"mappings":"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","sourcesContent":["import { _decorator, Component, Node, Prefab, instantiate, Vec3, UITransform, math, RigidBody2D, Vec2, Sprite, Color } from 'cc';\nconst { ccclass, property } = _decorator;\n\n@ccclass('BallSpawner')\nexport class BallSpawner extends Component {\n    @property(Prefab) ballPrefab!: Prefab;\n    @property(Node) canvas!: Node;\n    @property({ tooltip: 'Chance for golden ball (0.0 to 1.0)' })\n    goldenBallChance: number = 0.05;\n    @property({ tooltip: 'Initial spawn interval in seconds' })\n    initialSpawnInterval: number = 2.0;\n    @property({ tooltip: 'Minimum spawn interval (fastest speed)' })\n    minSpawnInterval: number = 0.3;\n    @property({ tooltip: 'How much to reduce interval every second' })\n    speedIncreaseRate: number = 0.05;\n    @property spawnHeight: number = 200;\n    @property({ tooltip: 'Minimum downward force to apply' })\n    minDownwardForce: number = 0;\n    @property({ tooltip: 'Maximum downward force to apply' })\n    maxDownwardForce: number = 50;\n\n    private spawnTimer: number = 0;\n    private gameTime: number = 0;\n    private currentSpawnInterval: number = 2.0;\n\n    start() {\n        this.currentSpawnInterval = this.initialSpawnInterval;\n    }\n\n    update(deltaTime: number) {\n        // Update game time\n        this.gameTime += deltaTime;\n        \n        // Update spawn speed over time\n        this.updateSpawnSpeed();\n        \n        // Update spawn timer\n        this.spawnTimer += deltaTime;\n\n        if (this.spawnTimer >= this.currentSpawnInterval) {\n            this.spawnBall();\n            this.spawnTimer = 0;\n        }\n    }\n\n    private updateSpawnSpeed() {\n        // Gradually decrease spawn interval (increase speed)\n        const speedReduction = this.speedIncreaseRate * this.gameTime;\n        this.currentSpawnInterval = Math.max(\n            this.minSpawnInterval,\n            this.initialSpawnInterval - speedReduction\n        );\n    }\n\n    spawnBall(): void {\n        if (!this.ballPrefab) {\n            console.error('Ball prefab not assigned!');\n            return;\n        }\n\n        const ball = instantiate(this.ballPrefab);\n        const canvasTransform = this.canvas.getComponent(UITransform);\n        const worldSize = canvasTransform?.contentSize || { width: 800, height: 600 };\n\n        // Check if this should be a golden ball (5% chance)\n        const isGoldenBall = Math.random() < this.goldenBallChance;\n        \n        if (isGoldenBall) {\n            // Make it golden by tinting the sprite\n            const sprite = ball.getComponent(Sprite);\n            if (sprite) {\n                sprite.color = new Color(255, 215, 0, 255); // Gold color\n            }\n            \n            // Tag it as golden for the collision detection\n            ball.name = 'GoldenBall';\n            console.log('âœ¨ GOLDEN BALL spawned!');\n        }\n\n        // Random X position within screen bounds (with padding)\n        const padding = 50;\n        const randomX = math.lerp(-worldSize.width / 2 + padding, worldSize.width / 2 - padding, Math.random());\n        const spawnY = worldSize.height / 2 + this.spawnHeight; // Above screen\n\n        ball.setPosition(new Vec3(randomX, spawnY, 0));\n        this.canvas.addChild(ball);\n        \n        // Apply random downward force to vary fall speed\n        const rigidBody = ball.getComponent(RigidBody2D);\n        if (rigidBody) {\n            const randomForce = math.lerp(this.minDownwardForce, this.maxDownwardForce, Math.random());\n            // Apply downward velocity (negative Y direction)\n            rigidBody.linearVelocity = new Vec2(0, -randomForce);\n            console.log(`Ball spawned at: ${randomX}, ${spawnY} with downward force: ${randomForce}`);\n        } else {\n            console.log(`Ball spawned at: ${randomX}, ${spawnY} (no RigidBody2D found)`);\n        }\n    }\n}"]}